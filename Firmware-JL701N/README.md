# Buddie-Firmware-JL701N

**这是一个基于杰理AC701N系列芯片的蓝牙低功耗(BLE)固件开发基础代码仓库。**

本仓库提供了一套针对杰理AC701N芯片的基础固件框架和示例代码，旨在帮助开发者快速搭建和开发基于该芯片的BLE应用，例如数据传输、信标(Beacon)、遥控器等。

## 🛠 系统需求

*   **操作系统:** Windows 10 及以上版本 (64位系统推荐)
*   **硬件:** 基于杰理AC701N芯片的开发板
*   **其他:** USB 数据线 (用于连接开发板和供电/烧录)

## 📚 准备工作

在开始编译和烧录代码前，请确保完成以下准备工作：

1.  **安装杰理开发工具链:**
    *   访问[珠海杰理科技官网](http://www.zh-jieli.com/)或开发者社区，下载适用于 **AC701N** 芯片的最新版本 **SDK** 和 **开发工具（IDE）**。
    *   运行安装程序，按照提示完成安装。通常安装路径不要包含中文或空格。
    *   (可选但推荐) 将工具链的 `bin` 目录添加到系统的 `PATH` 环境变量中，方便命令行操作。

2.  **安装杰理开发IDE:**
    *   SDK 包中通常包含杰理专用的集成开发环境 (IDE)。安装该 IDE。
    *   启动 IDE，可能需要根据提示进行一些初始配置（如选择工作空间、注册等）。

3.  **连接开发板:**
    *   使用 USB 数据线将开发板连接到电脑。
    *   **安装USB转串口驱动：** 开发板通常通过 CH340、CP210x 或杰理虚拟串口与电脑通信。根据开发板使用的芯片型号，在电脑上安装对应的 USB 转串口驱动程序。驱动通常可在开发板供应商处或芯片厂商官网下载（如 [沁恒官网](http://www.wch.cn/) 找 CH340 驱动）。
    *   连接成功后，在 Windows 设备管理器中应能看到对应的串行端口 (COMx)。

## 🚀 入门指南

1.  **获取代码:**
    ```bash
    git clone https://github.com/你的用户名/你的仓库名.git
    cd 你的仓库名
    ```

2.  **编译与烧录固件:**
    *   打开 **杰理开发IDE**。
    *   在 IDE 中选择 `File` -> `Open Project` 或 `Import Project`，导航到 `git clone` 下来的仓库目录，选择项目文件 (通常是 `.prj` 或 `.uvprojx` 等，具体取决于IDE)。
    *   在 IDE 中选择正确的 **目标芯片型号 (AC701N)** 和 **烧录工具** (通常是软件模拟的 J-Link 或杰理专用烧录器)。
    *   确保开发板已连接且驱动安装正确，IDE 通常能自动识别到串口号。
    *   **编译项目：** 点击 IDE 中的编译按钮 (通常是 Build/Rebuild)。
    *   **烧录固件：** 编译成功后，点击 IDE 中的下载/烧录按钮 (通常是 Download/Flash)。观察 IDE 输出窗口，直到显示烧录成功。
    *   烧录完成后，开发板可能会自动复位运行新固件。

3.  **连接手机测试BLE数据接收:**
    *   在手机上安装一个通用的 BLE 调试工具 App (例如：`nRF Connect`, `LightBlue`, `BLE Scanner` 等)。
    *   打开 App，开始扫描附近的 BLE 设备。
    *   你应该能扫描到名为 **`JL701N_DEV`** (或您在代码中自定义的名称) 的设备。这是本基础固件默认的广播名称。
    *   点击连接该设备。
    *   连接成功后，尝试查找并订阅(Notify/Indicate) **数据接收特征值 (例如：`FFE1`)**。
    *   开发板固件默认可能会定时发送数据或回显手机发送的数据。请参考具体项目文档或代码注释了解数据格式和交互协议。
    *   观察 App 中是否成功接收到来自开发板的数据。

## 📖 文档

*   **杰理官方文档:**
    *   **AC701N 芯片 Datasheet:** 包含芯片的电气特性、引脚定义、功能模块等核心硬件信息。 *(通常包含在 SDK 包中或需从杰理获取)*
    *   **AC701N SDK 开发手册:** 详细说明 SDK 架构、API 接口、外设驱动、BLE 协议栈使用、开发流程等。 *(SDK 包中最重要的文档)*
    *   **杰理开发工具 (IDE) 用户手册:** 介绍 IDE 的使用方法、工程配置、编译、调试、烧录等功能。 *(通常包含在 IDE 安装包或 SDK 中)*
    *   *请务必查阅您下载的 SDK 包内的 `doc` 或 `docs` 目录获取最准确和最新的官方文档。*

*   **本项目文档:**
    *   **[代码结构说明](./docs/CodeStructure.md):** 解释本仓库代码的目录结构、核心文件作用及模块划分。
    *   **[快速开发指南](./docs/QuickStart.md):** 提供基于本仓库进行二次开发的步骤、关键配置点、API 使用示例。
    *   **[BLE 服务与协议说明](./docs/BLE_Protocol.md):** 详细描述本基础固件实现的 BLE GATT 服务、特征值及其含义、数据格式和通信协议。
    *   **[常见问题解答 (FAQ)](./docs/FAQ.md):** 收集开发过程中可能遇到的典型问题及其解决方法。
    *   *请查看仓库根目录下的 `docs` 文件夹获取详细的项目文档。*

## 🧩 样例

本仓库的基础代码本身就是一个可运行的 BLE 示例。此外，我们还提供（或计划提供）以下基于此仓库修改的典型应用样例代码（可在仓库的 `examples` 目录中找到）：

1.  **修改广播名称:** 展示如何轻松更改设备的 BLE 广播名称。
    *   *修改位置:* `app_config.h` 或 BLE 初始化相关文件中的广播数据设置。
    *   *效果:* 手机扫描到的设备名称改变。

2.  **调整广播间隔:**
    *   *修改位置:* BLE 协议栈初始化或广播参数配置处。
    *   *效果:* 影响设备被发现的快慢和功耗。

3.  **自定义数据广播 (Beacon):** 实现类似 iBeacon/Eddystone 的广播帧，包含自定义信息（如 UUID, Major, Minor, TX Power 等）。
    *   *修改位置:* 配置广播数据包 (`advertising data` 和 `scan response data`)。
    *   *效果:* 设备无需连接即可广播特定信息，供手机 APP 扫描识别。

4.  **实现简单的数据透传:** 手机通过 BLE 发送数据，开发板接收后通过串口打印；开发板通过串口接收数据，再通过 BLE 发送给手机。
    *   *修改位置:* BLE 特征值的读写回调函数、串口接收中断服务程序。
    *   *效果:* 建立双向数据通道。

5.  **修改 BLE 发射功率:**
    *   *修改位置:* 调用设置 BLE 发射功率的 API。
    *   *效果:* 调整设备的无线通信距离。

## ❓ 问题与支持

如果您在使用本仓库或开发过程中遇到任何问题，请先查阅 **[FAQ](./docs/FAQ.md)** 和 **杰理官方文档**。

如果问题仍未解决，欢迎在仓库的 **[Issues](https://github.com/你的用户名/你的仓库名/issues)** 页面提交您的问题。请尽量清晰地描述问题现象、复现步骤、您已尝试过的解决方法以及相关的环境信息（如 SDK 版本、IDE 版本、开发板型号等）。

---

## 📜 许可证

本项目采用 **MIT 许可证** - 有关详细信息，请参阅 [LICENSE](LICENSE) 文件。

```plaintext
MIT License

Copyright (c) 2025 [您的姓名或组织名称]

特此免费授予任何获得本软件副本及相关文档文件（以下简称“软件”）的人士不受限制地处理本软件的权限，
包括但不限于使用、复制、修改、合并、发布、分发、再许可和/或销售本软件的副本，
并允许被提供本软件的人士这样做，但须符合以下条件：

上述版权声明和本许可声明应包含在本软件的所有副本或主要部分中。

本软件按“原样”提供，不提供任何明示或暗示的担保，包括但不限于对适销性、特定用途适用性和非侵权性的担保。
在任何情况下，作者或版权所有者均不对任何索赔、损害或其他责任承担责任，
无论是在合同、侵权或其他行为中产生的，还是与本软件或本软件的使用或其他交易相关的。
协议栈事件说明
###################

1.蓝牙协议栈处理函数说明
~~~~~~~~~~~~~~~~~~~~~~~~~~
原型：

.. code-block:: c

    /*-----------------------------------------------------------------------------
    @brief 蓝牙协议栈处理函数
        @param   bt : 事件结构体
        @return  默认0
        @note
        @demo
    ------------------------------------------------------------------------------*/
    static int bt_connction_status_event_handler(struct bt_event *bt)

参数：

+------+------------+
| 名称 |    说明    |
+======+============+
| bt   | 事件结构体 |
+------+------------+

结构体原型：

.. code-block:: c

    struct bt_event {
        u8 event;   // 事件类型
        u8 args[7]; // 事件参数，如带蓝牙地址等
        u32 value;  // 事件值，如HCI_EVENT_CONNECTION_COMPLETE事件的子事件
    };

2.协议栈事件介绍
~~~~~~~~~~~~~~~~~~~~~~~

在蓝牙app模式中有针对协议栈连接事件的处理，在其他app中如有需要也会注册处理函数针对相关的协议栈事件进行后续处理

+-----------------------------+--------------------------+
|            名称             |           说明           |
+=============================+==========================+
| BT_STATUS_INIT_OK           | 蓝牙协议栈初始化完成事件 |
+-----------------------------+--------------------------+
| BT_STATUS_FIRST_CONNECTED   | 首个设备连接成功事件     |
+-----------------------------+--------------------------+
| BT_STATUS_SECOND_CONNECTED  | 第二个设备连接成功事件   |
+-----------------------------+--------------------------+
| BT_STATUS_FIRST_DISCONNECT  | 首个连接设备断开事件     |
+-----------------------------+--------------------------+
| BT_STATUS_SECOND_DISCONNECT | 第二个连接设备断开事件   |
+-----------------------------+--------------------------+
| BT_STATUS_CONN_A2DP_CH      | A2DP连接                 |
+-----------------------------+--------------------------+
| BT_STATUS_DISCON_A2DP_CH    | A2DP断开                 |
+-----------------------------+--------------------------+

3.HCI事件介绍
~~~~~~~~~~~~~~

在蓝牙app模式中有针对HCI连接事件的处理，在其他app中如有需要也会注册处理函数针对相关的HCI事件进行处理

+--------------------------------------+-----------------------------------------------+
|                 名称                 |                     说明                      |
+======================================+===============================================+
| HCI_EVENT_VENDOR_META                |                                               |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_INQUIRY_COMPLETE           | 蓝牙搜索完成的事件                            |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_USER_CONFIRMATION_REQUEST  | 蓝牙连接确认                                  |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_USER_PASSKEY_REQUEST       | 蓝牙连接配对码请求                            |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_USER_PRESSKEY_NOTIFICATION | 蓝牙配对码通知                                |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_PIN_CODE_REQUEST           | 连接PIN CODE请求                              |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_VENDOR_NO_RECONN_ADDR      | 杰理自定义的事件:上电回连的时候读不到VM的地址 |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_DISCONNECTION_COMPLETE     | 蓝牙断连完成                                  |
+--------------------------------------+-----------------------------------------------+
| BTSTACK_EVENT_HCI_CONNECTIONS_DELETE | 杰理自定义的事件:断开之后协议栈资源释放完成   |
+--------------------------------------+-----------------------------------------------+
| HCI_EVENT_CONNECTION_COMPLETE        | 连接完成的事件                                |
+--------------------------------------+-----------------------------------------------+

连接完成事件子事件介绍:

+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
|                             名称                             |                                         说明                                          |
+==============================================================+=======================================================================================+
| ERROR_CODE_SUCCESS                                           | 连接成功                                                                              |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_PIN_OR_KEY_MISSING                                | 连接过程中linkkey丢失，手机删除了linkkey                                              |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_SYNCHRONOUS_CONNECTION_LIMIT_TO_A_DEVICE_EXCEEDED | 连接个数超出了资源允许                                                                |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_CONNECTION_REJECTED_DUE_TO_LIMITED_RESOURCES      | 需要回连的设备资源不够。有些手机连了一个设备之后就会用这个拒绝。或者其它的资源原因    |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_CONNECTION_REJECTED_DUE_TO_UNACCEPTABLE_BD_ADDR   | 有些可能只允许指定地址连接的，可能会用这个去拒绝连接。或者我们设备的地址全0或者有问题 |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_CONNECTION_ACCEPT_TIMEOUT_EXCEEDED                | 连接的时间太长了，手机要断开了                                                        |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_REMOTE_USER_TERMINATED_CONNECTION                 | 常用的连接断开消息                                                                    |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_CONNECTION_TERMINATED_BY_LOCAL_HOST               | 正常的断开消息，本地L2CAP资源释放之后就会发这个值上来了                               |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_AUTHENTICATION_FAILURE                            | 连接过程中linkkey丢失，手机删除了linkkey，回连就会出现一次                            |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_PAGE_TIMEOUT                                      | 回连超时退出消息                                                                      |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_CONNECTION_TIMEOUT                                | 连接过程中linkkey错误                                                                 |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+
| ERROR_CODE_ACL_CONNECTION_ALREADY_EXISTS                     | 回连的时候发现设备还没释放我们这个地址，一般直接断电开机回连会出现                    |
+--------------------------------------------------------------+---------------------------------------------------------------------------------------+



